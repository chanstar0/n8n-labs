{
  "name": "ä¼ä¸šçº§AIçŸ­è§†é¢‘è‡ªåŠ¨åŒ–ç”Ÿäº§çº¿",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "value": "0 10 * * *"
            }
          ]
        }
      },
      "name": "å®šæ—¶è§¦å‘å™¨",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [240, 300],
      "id": "dailyScheduleTrigger"
    },
    {
      "parameters": {
        "functionCode": "// å·¥ä½œæµçŠ¶æ€åˆå§‹åŒ–å’Œç¯å¢ƒæ£€æŸ¥\nconst workflowId = $workflow.id;\nconst executionId = $execution.id;\nconst timestamp = new Date().toISOString();\n\n// æ£€æŸ¥APIé…é¢å’ŒæœåŠ¡çŠ¶æ€\nconst serviceHealthCheck = {\n  rytr: true,\n  elevenlabs: true,\n  heygen: true,\n  bilibili: true\n};\n\n// åˆå§‹åŒ–æ‰§è¡Œä¸Šä¸‹æ–‡\nconst executionContext = {\n  workflow_id: workflowId,\n  execution_id: executionId,\n  start_time: timestamp,\n  status: 'initialized',\n  retry_count: 0,\n  max_retries: 3,\n  services_status: serviceHealthCheck\n};\n\n// è®°å½•å¼€å§‹æ—¥å¿—\nconsole.log(`[${timestamp}] å·¥ä½œæµæ‰§è¡Œå¼€å§‹: ${executionId}`);\n\nreturn {\n  json: {\n    execution_context: executionContext,\n    proceed: true\n  }\n};"
      },
      "name": "å·¥ä½œæµåˆå§‹åŒ–",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [440, 300],
      "id": "workflowInitialization"
    },
    {
      "parameters": {
        "url": "https://api.rytr.me/v1/ryte",
        "method": "POST",
        "authentication": "headerAuth",
        "headerAuth": {
          "name": "Authorization",
          "value": "Bearer {{ $connections.rytrApi.apiKey }}"
        },
        "body": {
          "json": {
            "language": "chinese",
            "tone": "funny",
            "use_case": "blog_idea_outline",
            "creativity_level": "optimal",
            "variations": 1,
            "userId": "{{ $connections.rytrApi.userId }}",
            "format": "text",
            "input_context": "ç”Ÿæˆä¸€ä¸ª3-5åˆ†é’Ÿçš„ä¸­æ–‡å¹½é»˜çŸ­å‰§è„šæœ¬ã€‚è¦æ±‚ï¼š1ï¼‰æƒ…èŠ‚ç´§å‡‘æœ‰è¶£ï¼ŒåŒ…å«2-3ä¸ªç¬‘ç‚¹ï¼›2ï¼‰è§’è‰²è®¾å®šé²œæ˜ï¼ˆ1-2ä¸ªä¸»è¦è§’è‰²ï¼‰ï¼›3ï¼‰å¯¹è¯è‡ªç„¶ç”ŸåŠ¨ï¼Œé€‚åˆé…éŸ³ï¼›4ï¼‰åœºæ™¯ç®€å•æ˜“æ‡‚ï¼›5ï¼‰å†…å®¹ç§¯ææ­£é¢ï¼Œé€‚åˆå…¨å¹´é¾„è§‚çœ‹ï¼›6ï¼‰ä½“ç°ä¸ªäººç‰¹è‰²å’Œå¹½é»˜é£æ ¼ã€‚ä¸»é¢˜å¯ä»¥æ˜¯ï¼šæ—¥å¸¸ç”Ÿæ´»è¶£äº‹ã€åŠå…¬å®¤å¹½é»˜ã€è½»æ¾ç¤¾äº¤åœºæ™¯ã€ç”Ÿæ´»å°çªé—¨ç­‰ã€‚è¯·ç¡®ä¿è„šæœ¬ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«å¼€å¤´ã€å‘å±•ã€é«˜æ½®ã€ç»“å°¾ã€‚"
          }
        },
        "options": {
          "responseFormat": "json",
          "timeout": 30000,
          "retry": {
            "count": 3,
            "interval": 2000
          }
        }
      },
      "name": "AIè„šæœ¬ç”Ÿæˆ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [640, 300],
      "id": "generateScript",
      "credentials": {
        "rytrApi": {
          "id": "rytr_api_credentials",
          "name": "Rytr API"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "// å†…å®¹è´¨é‡è¯„ä¼°å’Œå¤„ç†ç³»ç»Ÿ\nconst scriptContent = $json.data?.text || $json.text || '';\nconst executionContext = $node['å·¥ä½œæµåˆå§‹åŒ–'].json.execution_context;\n\n// å†…å®¹è´¨é‡è¯„ä¼°å‡½æ•°\nfunction evaluateContentQuality(content) {\n  const qualityMetrics = {\n    length: content.length >= 200 && content.length <= 3000,\n    structure: /è§’è‰²|åœºæ™¯|å¯¹è¯/.test(content),\n    humor: /å¹½é»˜|æç¬‘|æœ‰è¶£|å¥½ç©|æ»‘ç¨½|é€—ä¹/.test(content),\n    dialogue: /[\"\"'']|ï¼š|è¯´|é“/.test(content),\n    positive: !/è´Ÿé¢|æ¶ˆæ|æ‚²è§‚|æš´åŠ›/.test(content),\n    compliance: !/(æ”¿æ²»|æ•æ„Ÿ|è¿æ³•|ä¸å½“)/.test(content)\n  };\n  \n  const score = Object.values(qualityMetrics).filter(Boolean).length / Object.keys(qualityMetrics).length;\n  \n  return {\n    score: Math.round(score * 100) / 100,\n    passed: score >= 0.75,\n    metrics: qualityMetrics,\n    issues: Object.entries(qualityMetrics)\n      .filter(([key, value]) => !value)\n      .map(([key]) => key)\n  };\n}\n\n// å†…å®¹é¢„å¤„ç†å’Œæ ‡å‡†åŒ–\nfunction preprocessContent(content) {\n  // æ¸…ç†å’Œæ ¼å¼åŒ–å†…å®¹\n  let processed = content\n    .replace(/\\r\\n/g, '\\n')\n    .replace(/\\n{3,}/g, '\\n\\n')\n    .trim();\n  \n  // æå–æ ‡é¢˜å’Œæè¿°\n  const titleMatch = processed.match(/(?:æ ‡é¢˜|é¢˜ç›®)[ï¼š:]?\\s*(.+?)(?:\\n|$)/i);\n  const descMatch = processed.match(/(?:æè¿°|ç®€ä»‹|æ¦‚è¿°)[ï¼š:]?\\s*(.+?)(?:\\n|$)/i);\n  \n  const title = titleMatch ? titleMatch[1].trim() : 'ä»Šæ—¥æç¬‘çŸ­å‰§';\n  const description = descMatch ? descMatch[1].trim() : processed.substring(0, 120) + '...';\n  \n  return {\n    title,\n    description,\n    content: processed,\n    wordCount: processed.length\n  };\n}\n\n// æ‰§è¡Œè¯„ä¼°\nconst qualityassessment = evaluateContentQuality(scriptContent);\nconst processedContent = preprocessContent(scriptContent);\n\n// æ›´æ–°æ‰§è¡Œä¸Šä¸‹æ–‡\nconst updatedContext = {\n  ...executionContext,\n  content_quality: qualityAssessment,\n  content_processed: processedContent,\n  step: 'content_evaluation'\n};\n\n// å¦‚æœè´¨é‡ä¸è¾¾æ ‡ï¼Œæ ‡è®°éœ€è¦é‡æ–°ç”Ÿæˆ\nif (!qualityAssessment.passed) {\n  console.warn(`å†…å®¹è´¨é‡è¯„ä¼°æœªé€šè¿‡: å¾—åˆ† ${qualityAssessment.score}, é—®é¢˜: ${qualityAssessment.issues.join(', ')}`);\n  \n  if (executionContext.retry_count < executionContext.max_retries) {\n    return {\n      json: {\n        execution_context: {\n          ...updatedContext,\n          retry_count: executionContext.retry_count + 1,\n          status: 'retry_needed'\n        },\n        retry_script_generation: true,\n        quality_issues: qualityAssessment.issues\n      }\n    };\n  }\n}\n\n// ç”Ÿæˆå„å¹³å°çš„è½½è·æ•°æ®\nconst platformPayloads = {\n  elevenlabs: {\n    text: processedContent.content,\n    model_id: \"eleven_multilingual_v2\",\n    voice_settings: {\n      stability: 0.8,\n      similarity_boost: 0.75,\n      style: 0.6,\n      use_speaker_boost: true\n    },\n    voice_id: \"{{ $connections.elevenLabsApi.voiceId }}\"\n  },\n  heygen: {\n    video_inputs: [{\n      character: {\n        type: \"avatar\",\n        avatar_id: \"{{ $connections.heyGenApi.avatarId }}\"\n      },\n      voice: {\n        type: \"text\",\n        input_text: processedContent.content,\n        voice_id: \"{{ $connections.heyGenApi.voiceId }}\"\n      }\n    }],\n    dimension: {\n      width: 720,\n      height: 1280\n    },\n    aspect_ratio: \"9:16\"\n  }\n};\n\nreturn {\n  json: {\n    execution_context: updatedContext,\n    script_title: processedContent.title,\n    script_description: processedContent.description,\n    script_content: processedContent.content,\n    word_count: processedContent.wordCount,\n    quality_score: qualityAssessment.score,\n    platform_payloads: platformPayloads,\n    proceed_to_production: true\n  }\n};"
      },
      "name": "å†…å®¹è´¨é‡è¯„ä¼°ä¸å¤„ç†",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [840, 300],
      "id": "contentQualityEvaluation"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "quality_check",
              "leftValue": "={{ $json.proceed_to_production }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equal"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "name": "è´¨é‡æ£€æŸ¥åˆ†æ”¯",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [1040, 300],
      "id": "qualityCheckBranch"
    },
    {
      "parameters": {
        "url": "https://api.elevenlabs.io/v1/text-to-speech/{{ $json.platform_payloads.elevenlabs.voice_id }}",
        "method": "POST",
        "authentication": "headerAuth",
        "headerAuth": {
          "name": "xi-api-key",
          "value": "{{ $connections.elevenLabsApi.apiKey }}"
        },
        "body": {
          "json": "={{ $json.platform_payloads.elevenlabs }}"
        },
        "options": {
          "responseFormat": "binary",
          "timeout": 60000,
          "retry": {
            "count": 2,
            "interval": 3000
          }
        }
      },
      "name": "è¯­éŸ³åˆæˆç”Ÿæˆ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [1240, 200],
      "id": "generateVoiceover",
      "credentials": {
        "elevenLabsApi": {
          "id": "elevenlabs_api_credentials",
          "name": "ElevenLabs API"
        }
      }
    },
    {
      "parameters": {
        "url": "https://api.heygen.com/v1/video/generate",
        "method": "POST",
        "authentication": "headerAuth",
        "headerAuth": {
          "name": "X-Api-Key",
          "value": "{{ $connections.heyGenApi.apiKey }}"
        },
        "body": {
          "json": "={{ $json.platform_payloads.heygen }}"
        },
        "options": {
          "responseFormat": "json",
          "timeout": 120000,
          "retry": {
            "count": 2,
            "interval": 5000
          }
        }
      },
      "name": "AIè§†é¢‘ç”Ÿæˆ",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [1240, 400],
      "id": "generateVideo",
      "credentials": {
        "heyGenApi": {
          "id": "heygen_api_credentials",
          "name": "HeyGen API"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "// å¤šåª’ä½“å¤„ç†å’Œè´¨é‡æ£€æŸ¥\nconst videoResponse = $node['AIè§†é¢‘ç”Ÿæˆ'].json;\nconst audioData = $node['è¯­éŸ³åˆæˆç”Ÿæˆ'].binary;\nconst contentData = $node['å†…å®¹è´¨é‡è¯„ä¼°ä¸å¤„ç†'].json;\n\n// æ£€æŸ¥ç”Ÿæˆç»“æœ\nconst videoId = videoResponse.data?.video_id || videoResponse.video_id;\nconst audioBuffer = audioData?.data;\n\nif (!videoId) {\n  throw new Error('è§†é¢‘ç”Ÿæˆå¤±è´¥: æœªè·å¾—è§†é¢‘ID');\n}\n\nif (!audioBuffer) {\n  throw new Error('è¯­éŸ³åˆæˆå¤±è´¥: æœªè·å¾—éŸ³é¢‘æ•°æ®');\n}\n\n// ç”Ÿæˆå¤šå¹³å°é€‚é…å†…å®¹\nconst platformAdaptations = {\n  bilibili: {\n    title: `ã€AIæç¬‘çŸ­å‰§ã€‘${contentData.script_title}`,\n    description: `${contentData.script_description}\\n\\n#AIçŸ­å‰§ #å¹½é»˜æç¬‘ #åŸåˆ›å†…å®¹ #ä¸ªäººIP`,\n    tags: 'æç¬‘,å¹½é»˜,AI,çŸ­å‰§,æƒ…æ™¯å‰§,åŸåˆ›',\n    category: 'æç¬‘',\n    copyright: 1\n  },\n  douyin: {\n    title: contentData.script_title,\n    description: `${contentData.script_description} #æç¬‘ #AIçŸ­å‰§ #å¹½é»˜`,\n    hashtags: ['#æç¬‘', '#AIçŸ­å‰§', '#å¹½é»˜', '#åŸåˆ›']\n  },\n  xiaohongshu: {\n    title: `âœ¨${contentData.script_title}`,\n    description: `${contentData.script_description}\\n\\n#æç¬‘çŸ­å‰§ #AIåˆ›ä½œ #å¹½é»˜æ—¥å¸¸`,\n    hashtags: ['æç¬‘çŸ­å‰§', 'AIåˆ›ä½œ', 'å¹½é»˜æ—¥å¸¸', 'åŸåˆ›å†…å®¹']\n  }\n};\n\n// æ›´æ–°æ‰§è¡Œä¸Šä¸‹æ–‡\nconst executionContext = {\n  ...contentData.execution_context,\n  video_id: videoId,\n  audio_ready: true,\n  video_ready: true,\n  step: 'media_processing_complete',\n  platform_adaptations: platformAdaptations\n};\n\nreturn {\n  json: {\n    execution_context: executionContext,\n    video_id: videoId,\n    script_title: contentData.script_title,\n    script_description: contentData.script_description,\n    quality_score: contentData.quality_score,\n    platform_content: platformAdaptations,\n    ready_for_review: true\n  },\n  binary: {\n    audio_file: audioData.data,\n    video_placeholder: {\n      data: 'video_processing_in_progress',\n      fileName: `ai_video_${videoId}.mp4`,\n      fileType: 'video/mp4'\n    }\n  }\n};"
      },
      "name": "å¤šåª’ä½“å¤„ç†ä¸å¹³å°é€‚é…",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1440, 300],
      "id": "mediaProcessingAndAdaptation"
    },
    {
      "parameters": {
        "mode": "manual",\n        "message": "ğŸ¬ AIçŸ­è§†é¢‘å†…å®¹å®¡æ ¸\\n\\nğŸ“ è„šæœ¬æ ‡é¢˜: {{ $json.script_title }}\\nğŸ“Š å†…å®¹è´¨é‡è¯„åˆ†: {{ $json.quality_score }}\\nğŸ¯ ç›®æ ‡å¹³å°: Bç«™ã€æŠ–éŸ³ã€å°çº¢ä¹¦\\n\\nè¯·å®¡æ ¸ä»¥ä¸‹å†…å®¹ï¼š\\nâœ… è„šæœ¬å†…å®¹è´¨é‡å’Œå¹½é»˜åº¦\\nâœ… è¯­éŸ³åˆæˆæ•ˆæœ\\nâœ… è§†é¢‘ç”»é¢è´¨é‡\\nâœ… å¹³å°åˆè§„æ€§\\n\\nç¡®è®¤æ— è¯¯åç‚¹å‡»ç»§ç»­å‘å¸ƒåˆ°å„å¹³å°ã€‚",
        "buttonText": "âœ… å®¡æ ¸é€šè¿‡ï¼Œå¼€å§‹å‘å¸ƒ",
        "options": {
          "allowManualReexecution": true
        }
      },
      "name": "äººå·¥å®¡æ ¸æ£€æŸ¥ç‚¹",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [1640, 300],
      "id": "humanReviewCheckpoint"
    },
    {
      "parameters": {
        "url": "https://api.bilibili.com/x/ugc/creative/web/upload/v2",
        "method": "POST",
        "authentication": "headerAuth",
        "headerAuth": {
          "name": "Authorization",
          "value": "Bearer {{ $connections.bilibiliOAuth.accessToken }}"
        },
        "body": {
          "mode": "formdata",
          "formData": {
            "parameters": [
              {
                "name": "video_file",
                "type": "file",
                "value": "={{ $json.binary.video_placeholder }}"
              },
              {
                "name": "title",
                "value": "={{ $json.platform_content.bilibili.title }}"
              },
              {
                "name": "desc",
                "value": "={{ $json.platform_content.bilibili.description }}"
              },
              {
                "name": "tag",
                "value": "={{ $json.platform_content.bilibili.tags }}"
              },
              {
                "name": "copyright",
                "value": "1"
              }
            ]
          }
        },
        "options": {
          "responseFormat": "json",
          "timeout": 300000
        }
      },
      "name": "å‘å¸ƒåˆ°Bç«™",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 3,
      "position": [1840, 180],
      "id": "publishToBilibili",
      "credentials": {
        "bilibiliOAuth": {
          "id": "bilibili_oauth_credentials",
          "name": "Bilibili OAuth"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "// æŠ–éŸ³å‘å¸ƒå¤„ç†ï¼ˆæµè§ˆå™¨è‡ªåŠ¨åŒ–æˆ–æ‰‹åŠ¨å¼•å¯¼ï¼‰\nconst contentData = $json;\nconst douyinContent = contentData.platform_content.douyin;\n\n// è®°å½•æŠ–éŸ³å‘å¸ƒä»»åŠ¡\nconst douyinTask = {\n  platform: 'douyin',\n  title: douyinContent.title,\n  description: douyinContent.description,\n  hashtags: douyinContent.hashtags,\n  video_id: contentData.video_id,\n  status: 'pending_manual_upload',\n  instructions: [\n    '1. ä¸‹è½½ç”Ÿæˆçš„è§†é¢‘æ–‡ä»¶',\n    '2. ç™»å½•æŠ–éŸ³åˆ›ä½œè€…å¹³å°',\n    '3. ä¸Šä¼ è§†é¢‘å¹¶å¡«å†™æ ‡é¢˜å’Œæè¿°',\n    '4. æ·»åŠ ç›¸å…³è¯é¢˜æ ‡ç­¾',\n    '5. é€‰æ‹©åˆé€‚çš„å‘å¸ƒæ—¶é—´',\n    '6. å®Œæˆå‘å¸ƒå¹¶è®°å½•ç»“æœ'\n  ],\n  alternative: 'å¯è€ƒè™‘ä½¿ç”¨æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä½†éœ€è°¨æ…è¯„ä¼°é£é™©'\n};\n\n// æœªæ¥å¯é›†æˆæµè§ˆå™¨è‡ªåŠ¨åŒ–\n// æ³¨æ„ï¼šéœ€è¦è¯„ä¼°å¹³å°æ”¿ç­–åˆè§„æ€§\n\nreturn {\n  json: {\n    platform: 'douyin',\n    status: 'manual_intervention_required',\n    task: douyinTask,\n    message: 'æŠ–éŸ³å‘å¸ƒéœ€è¦äººå·¥æ“ä½œï¼Œå·²ç”Ÿæˆè¯¦ç»†æŒ‡å¼•'\n  }\n};"
      },
      "name": "æŠ–éŸ³å‘å¸ƒå¼•å¯¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1840, 300],
      "id": "douyinPublishGuide"
    },
    {
      "parameters": {
        "functionCode": "// å°çº¢ä¹¦å‘å¸ƒå¤„ç†ï¼ˆæµè§ˆå™¨è‡ªåŠ¨åŒ–æˆ–æ‰‹åŠ¨å¼•å¯¼ï¼‰\nconst contentData = $json;\nconst xiaohongshuContent = contentData.platform_content.xiaohongshu;\n\n// è®°å½•å°çº¢ä¹¦å‘å¸ƒä»»åŠ¡\nconst xiaohongshuTask = {\n  platform: 'xiaohongshu',\n  title: xiaohongshuContent.title,\n  description: xiaohongshuContent.description,\n  hashtags: xiaohongshuContent.hashtags,\n  video_id: contentData.video_id,\n  status: 'pending_manual_upload',\n  instructions: [\n    '1. ç¡®ä¿å†…å®¹ç¬¦åˆå°çº¢ä¹¦ç¤¾åŒºè§„èŒƒ',\n    '2. ç™»å½•å°çº¢ä¹¦åˆ›ä½œè€…å¹³å°',\n    '3. ä¸Šä¼ è§†é¢‘å¹¶æ·»åŠ å°é¢',\n    '4. å¡«å†™æ ‡é¢˜å’Œè¯¦ç»†æè¿°',\n    '5. æ·»åŠ ç›¸å…³è¯é¢˜å’Œæ ‡ç­¾',\n    '6. é€‰æ‹©åˆé€‚çš„å‘å¸ƒæ—¶é—´',\n    '7. å®Œæˆå‘å¸ƒå¹¶ç›‘æ§å®¡æ ¸çŠ¶æ€'\n  ],\n  compliance_notes: [\n    'å†…å®¹éœ€ç¬¦åˆå¹³å°ä»·å€¼è§‚',\n    'é¿å…è¿‡åº¦å•†ä¸šåŒ–è¡¨è¾¾',\n    'æ³¨æ„æ•æ„Ÿè¯æ±‡ç­›æŸ¥',\n    'ç¡®ä¿åŸåˆ›æ€§å£°æ˜'\n  ]\n};\n\nreturn {\n  json: {\n    platform: 'xiaohongshu',\n    status: 'manual_intervention_required',\n    task: xiaohongshuTask,\n    message: 'å°çº¢ä¹¦å‘å¸ƒéœ€è¦äººå·¥æ“ä½œï¼Œå·²ç”Ÿæˆåˆè§„æŒ‡å¼•'\n  }\n};"
      },
      "name": "å°çº¢ä¹¦å‘å¸ƒå¼•å¯¼",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1840, 420],
      "id": "xiaohongshuPublishGuide"
    },
    {
      "parameters": {
        "functionCode": "// å·¥ä½œæµæ‰§è¡Œæ€»ç»“å’ŒæŠ¥å‘Šç”Ÿæˆ\nconst executionContext = $json.execution_context || {};\nconst bilibiliResult = $node['å‘å¸ƒåˆ°Bç«™']?.json || {};\nconst douyinResult = $node['æŠ–éŸ³å‘å¸ƒå¼•å¯¼']?.json || {};\nconst xiaohongshuResult = $node['å°çº¢ä¹¦å‘å¸ƒå¼•å¯¼']?.json || {};\n\nconst endTime = new Date().toISOString();\nconst startTime = executionContext.start_time;\nconst duration = startTime ? Math.round((new Date(endTime) - new Date(startTime)) / 1000) : 0;\n\n// ç”Ÿæˆæ‰§è¡ŒæŠ¥å‘Š\nconst executionReport = {\n  workflow_id: executionContext.workflow_id,\n  execution_id: executionContext.execution_id,\n  start_time: startTime,\n  end_time: endTime,\n  duration_seconds: duration,\n  content_quality_score: $json.quality_score,\n  script_title: $json.script_title,\n  platforms: {\n    bilibili: {\n      status: bilibiliResult.success ? 'published' : 'failed',\n      response: bilibiliResult\n    },\n    douyin: {\n      status: 'manual_required',\n      task: douyinResult.task\n    },\n    xiaohongshu: {\n      status: 'manual_required',\n      task: xiaohongshuResult.task\n    }\n  },\n  metrics: {\n    total_duration: `${duration}ç§’`,\n    content_score: $json.quality_score,\n    auto_published_platforms: 1,\n    manual_required_platforms: 2\n  },\n  next_actions: [\n    'æ£€æŸ¥Bç«™å‘å¸ƒçŠ¶æ€',\n    'æŒ‰æŒ‡å¼•å®ŒæˆæŠ–éŸ³æ‰‹åŠ¨å‘å¸ƒ',\n    'æŒ‰æŒ‡å¼•å®Œæˆå°çº¢ä¹¦æ‰‹åŠ¨å‘å¸ƒ',\n    'ç›‘æ§å„å¹³å°æ•°æ®è¡¨ç°',\n    'æ”¶é›†ç”¨æˆ·åé¦ˆä¼˜åŒ–ä¸‹æ¬¡ç”Ÿæˆ'\n  ]\n};\n\n// è¾“å‡ºæœ€ç»ˆæŠ¥å‘Š\nconsole.log('=== AIçŸ­è§†é¢‘è‡ªåŠ¨åŒ–ç”Ÿäº§çº¿æ‰§è¡ŒæŠ¥å‘Š ===');\nconsole.log(`æ‰§è¡Œæ—¶é•¿: ${duration}ç§’`);\nconsole.log(`å†…å®¹è´¨é‡: ${$json.quality_score}`);\nconsole.log(`è‡ªåŠ¨å‘å¸ƒ: Bç«™`);\nconsole.log(`æ‰‹åŠ¨å‘å¸ƒ: æŠ–éŸ³ã€å°çº¢ä¹¦`);\nconsole.log('=====================================');\n\nreturn {\n  json: {\n    execution_report: executionReport,\n    status: 'completed',\n    success: true,\n    message: 'å·¥ä½œæµæ‰§è¡Œå®Œæˆï¼Œå·²ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š'\n  }\n};"
      },
      "name": "æ‰§è¡Œæ€»ç»“ä¸æŠ¥å‘Š",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2040, 300],
      "id": "executionSummaryReport"
    }
  ],
  "connections": {
    "dailyScheduleTrigger": {
      "main": [[{
        "node": "å·¥ä½œæµåˆå§‹åŒ–",
        "type": "main",
        "index": 0
      }]]
    },
    "workflowInitialization": {
      "main": [[{
        "node": "AIè„šæœ¬ç”Ÿæˆ",
        "type": "main",
        "index": 0
      }]]
    },
    "generateScript": {
      "main": [[{
        "node": "å†…å®¹è´¨é‡è¯„ä¼°ä¸å¤„ç†",
        "type": "main",
        "index": 0
      }]]
    },
    "contentQualityEvaluation": {
      "main": [[{
        "node": "è´¨é‡æ£€æŸ¥åˆ†æ”¯",
        "type": "main",
        "index": 0
      }]]
    },
    "qualityCheckBranch": {
      "main": [
        [{
          "node": "è¯­éŸ³åˆæˆç”Ÿæˆ",
          "type": "main",
          "index": 0
        }, {
          "node": "AIè§†é¢‘ç”Ÿæˆ",
          "type": "main",
          "index": 0
        }],
        [{
          "node": "AIè„šæœ¬ç”Ÿæˆ",
          "type": "main",
          "index": 0
        }]
      ]
    },
    "generateVoiceover": {
      "main": [[{
        "node": "å¤šåª’ä½“å¤„ç†ä¸å¹³å°é€‚é…",
        "type": "main",
        "index": 0
      }]]
    },
    "generateVideo": {
      "main": [[{
        "node": "å¤šåª’ä½“å¤„ç†ä¸å¹³å°é€‚é…",
        "type": "main",
        "index": 0
      }]]
    },
    "mediaProcessingAndAdaptation": {
      "main": [[{
        "node": "äººå·¥å®¡æ ¸æ£€æŸ¥ç‚¹",
        "type": "main",
        "index": 0
      }]]
    },
    "humanReviewCheckpoint": {
      "main": [[{
        "node": "å‘å¸ƒåˆ°Bç«™",
        "type": "main",
        "index": 0
      }, {
        "node": "æŠ–éŸ³å‘å¸ƒå¼•å¯¼",
        "type": "main",
        "index": 0
      }, {
        "node": "å°çº¢ä¹¦å‘å¸ƒå¼•å¯¼",
        "type": "main",
        "index": 0
      }]]
    },
    "publishToBilibili": {
      "main": [[{
        "node": "æ‰§è¡Œæ€»ç»“ä¸æŠ¥å‘Š",
        "type": "main",
        "index": 0
      }]]
    },
    "douyinPublishGuide": {
      "main": [[{
        "node": "æ‰§è¡Œæ€»ç»“ä¸æŠ¥å‘Š",
        "type": "main",
        "index": 0
      }]]
    },
    "xiaohongshuPublishGuide": {
      "main": [[{
        "node": "æ‰§è¡Œæ€»ç»“ä¸æŠ¥å‘Š",
        "type": "main",
        "index": 0
      }]]
    }
  },
  "active": false,
  "settings": {
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "error_handling_workflow",
    "timezone": "Asia/Shanghai"
  },
  "staticData": null,
  "pinData": null,
  "versionId": "2.0",
  "triggerCount": 0,
  "id": "enterprise_ai_video_automation",
  "meta": {
    "instanceId": "enterprise_n8n_instance",
    "templateVersion": "2.0.0",
    "author": "Senior N8N Solutions Architect",
    "description": "ä¼ä¸šçº§AIçŸ­è§†é¢‘è‡ªåŠ¨åŒ–ç”Ÿäº§çº¿ï¼ŒåŒ…å«å®Œæ•´çš„è´¨é‡æ§åˆ¶ã€é”™è¯¯å¤„ç†ã€å¤šå¹³å°é€‚é…å’Œç›‘æ§æŠ¥å‘ŠåŠŸèƒ½"
  }
}